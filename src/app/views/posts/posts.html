<div class="content">
  <h1 class="text-center">Listado de posts</h1>
  <hr class="hr-main">

  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0">Anuncios</h5>

      <button class="btn btn-success" ui-sref="newPost">
        <i class="fas fa-plus"></i> Crear anuncio
      </button>
    </div>

    <table class="table table-dark table-hover">
      <thead>
      <tr>
        <th>Título</th>
        <th>Juego / Plataforma / Modo</th>
        <th>Jugadores</th>
        <th>Acciones</th>
      </tr>
      </thead>

      <tbody>
      <tr ng-if="loading">
        <td colspan="4" class="text-center">Cargando anuncios...</td>
      </tr>

      <tr ng-if="!loading && items.length === 0">
        <td colspan="4" class="text-center">No hay anuncios para mostrar</td>
      </tr>

      <tr ng-repeat="p in items track by p.id_post">
        <td>{{ p.title }}</td>

        <td>
          {{ p.gameName }} · {{ p.platformName }} · {{ p.modeName }}
        </td>

        <td>
            <span
                class="badge"
                ng-class="{
                'badge-success': p.actualusers < p.requiredusers,
                'badge-danger': p.actualusers >= p.requiredusers
              }"
            >
              {{ p.actualusers }} / {{ p.requiredusers }}
            </span>
        </td>

        <td class="text-nowrap">
          <button
              class="btn btn-sm btn-link text-info p-0 mr-1 shadow-none"
              ui-sref="editPost({ id_post: p.id_post })"
              title="Editar"
          >
            <i class="fas fa-edit"></i>
          </button>

          <button
              class="btn btn-sm btn-link text-danger p-0 shadow-none"
              title="Eliminar"
              ng-click="removePost(p.id_post)"
          >
            <i class="fas fa-trash-alt"></i>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
